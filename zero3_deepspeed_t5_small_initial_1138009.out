## Current dircectory /home/s1930443/MRP1
## Number of available CUDA devices: 0,1,2,3
## Checking status of CUDA device with nvidia-smi
Sun Mar 12 02:51:35 2023       
+-----------------------------------------------------------------------------+
| NVIDIA-SMI 418.87.00    Driver Version: 525.60.13    CUDA Version: 12.0     |
|-------------------------------+----------------------+----------------------+
| GPU  Name        Persistence-M| Bus-Id        Disp.A | Volatile Uncorr. ECC |
| Fan  Temp  Perf  Pwr:Usage/Cap|         Memory-Usage | GPU-Util  Compute M. |
|===============================+======================+======================|
|   0  NVIDIA GeForce ...  Off  | 00000000:5A:00.0 Off |                  N/A |
| 30%   27C    P8    11W / 250W |    252MiB / 11264MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   1  NVIDIA GeForce ...  Off  | 00000000:62:00.0 Off |                  N/A |
| 29%   27C    P8    19W / 250W |    252MiB / 11264MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   2  NVIDIA GeForce ...  Off  | 00000000:B9:00.0 Off |                  N/A |
| 30%   26C    P8    18W / 250W |    252MiB / 11264MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
|   3  NVIDIA GeForce ...  Off  | 00000000:C1:00.0 Off |                  N/A |
| 29%   25C    P8    21W / 250W |    252MiB / 11264MiB |      0%      Default |
+-------------------------------+----------------------+----------------------+
                                                                               
+-----------------------------------------------------------------------------+
| Processes:                                                       GPU Memory |
|  GPU       PID   Type   Process name                             Usage      |
|=============================================================================|
|  No running processes found                                                 |
+-----------------------------------------------------------------------------+
[/bin/bash] #### Starting Initial T5 Training Test
[/bin/bash] ## This is s1930443 on node851 and this job has the ID 1138009
[/bin/bash] ## current working directory: /home/s1930443/MRP1
[/bin/bash] ## Run script
[2023-03-12 02:52:31,364] [WARNING] [runner.py:186:fetch_hostfile] Unable to find hostfile, will proceed with training with local resources only.
Detected CUDA_VISIBLE_DEVICES=0,1,2,3: setting --include=localhost:0,1,2,3
[2023-03-12 02:52:31,403] [INFO] [runner.py:548:main] cmd = /data1/s1930443/conda_pkgs/T5-test-env/bin/python -u -m deepspeed.launcher.launch --world_info=eyJsb2NhbGhvc3QiOiBbMCwgMSwgMiwgM119 --master_addr=127.0.0.1 --master_port=29500 --enable_each_rank_log=None t5_base_initial_deepspeed.py --deepspeed /home/s1930443/.config/deepspeed/ds_config_zero3.json --dataset_label artplit --train_articles_filepath /home/s1930443/MRP1/data/artplit/r_art_train_artplit.csv --train_comments_filepath /home/s1930443/MRP1/data/artplit/r_cmt_train_artplit.csv --val_articles_filepath /home/s1930443/MRP1/data/artplit/r_art_val_artplit.csv --val_comments_filepath /home/s1930443/MRP1/data/artplit/r_cmt_val_artplit.csv --model_output_dir /data1/s1930443/hf_models --wandb_project transformers_t5_alice_deepspeed_test --hf_model_id t5-small --train_batch_size 2 --valid_batch_size 2 --train_epochs 1 --val_epochs 1 --learning_rate 0.0001 --seed 42 --max_source_len 512 --max_target_len 200 --optimizer_type AdamW  
[2023-03-12 02:52:42,841] [INFO] [launch.py:142:main] WORLD INFO DICT: {'localhost': [0, 1, 2, 3]}
[2023-03-12 02:52:42,842] [INFO] [launch.py:148:main] nnodes=1, num_local_procs=4, node_rank=0
[2023-03-12 02:52:42,842] [INFO] [launch.py:161:main] global_rank_mapping=defaultdict(<class 'list'>, {'localhost': [0, 1, 2, 3]})
[2023-03-12 02:52:42,842] [INFO] [launch.py:162:main] dist_world_size=4
[2023-03-12 02:52:42,842] [INFO] [launch.py:164:main] Setting CUDA_VISIBLE_DEVICES=0,1,2,3
[2023-03-12 02:52:43,901] [INFO] [launch.py:318:sigkill_handler] Killing subprocess 38543
[2023-03-12 02:52:43,930] [INFO] [launch.py:318:sigkill_handler] Killing subprocess 38544
[2023-03-12 02:52:43,930] [INFO] [launch.py:318:sigkill_handler] Killing subprocess 38545
[2023-03-12 02:52:43,952] [INFO] [launch.py:318:sigkill_handler] Killing subprocess 38546
[2023-03-12 02:52:43,970] [ERROR] [launch.py:324:sigkill_handler] ['/data1/s1930443/conda_pkgs/T5-test-env/bin/python', '-u', 't5_base_initial_deepspeed.py', '--local_rank=3', '--deepspeed', '/home/s1930443/.config/deepspeed/ds_config_zero3.json', '--dataset_label', 'artplit', '--train_articles_filepath', '/home/s1930443/MRP1/data/artplit/r_art_train_artplit.csv', '--train_comments_filepath', '/home/s1930443/MRP1/data/artplit/r_cmt_train_artplit.csv', '--val_articles_filepath', '/home/s1930443/MRP1/data/artplit/r_art_val_artplit.csv', '--val_comments_filepath', '/home/s1930443/MRP1/data/artplit/r_cmt_val_artplit.csv', '--model_output_dir', '/data1/s1930443/hf_models', '--wandb_project', 'transformers_t5_alice_deepspeed_test', '--hf_model_id', 't5-small', '--train_batch_size', '2', '--valid_batch_size', '2', '--train_epochs', '1', '--val_epochs', '1', '--learning_rate', '0.0001', '--seed', '42', '--max_source_len', '512', '--max_target_len', '200', '--optimizer_type', 'AdamW', ' '] exits with return code = 1
[/bin/bash] ## Script finished
[/bin/bash] ## Deactivating environment and close job.
